# Image definitions
release_id: "rel-20240609v2"
storage_dir: /mnt/persist/images

filesystems:
  base:
    - mountpoint: /
      min_size: 10240
    - mountpoint: /tmp
      min_size: 1024
    - mountpoint: /var/tmp
      min_size: 1024
    - mountpoint: /var/log
      min_size: 2048
    - mountpoint: /home
      min_size: 2048
  lamp:
    - mountpoint: /var/www/html
      min_size: 2048
    - mountpoint: /var/lib/mysql
      min_size: 2048

packages:
  base:
    - jq
    - sysstat
    - ipa-client
    - openscap-scanner
  lamp:
    - httpd
    - mariadb-server
    - php
    - php-mysqlnd

images:
  - name: rhel-8.4-lamp-ib
    compose:
      distribution: rhel-84
      image_description: "{{ release_id }}"
      customizations:
        filesystem: "{{ filesystems.base }}"
        packages: "{{ packages.base }}"

  - name: rhel-8.4-base-ib
    compose:
      distribution: rhel-84
      image_description: "{{ release_id }}"
      customizations:
        filesystem: "{{ filesystems.base }}"
        packages: "{{ packages.base }}"

  - name: rhel-9.2-base-ib
    compose:
      distribution: rhel-92
      image_description: "{{ release_id }}"
      customizations:
        filesystem: "{{ filesystems.base }}"
        packages: "{{ packages.base }}"

  - name: rhel-9-lamp-ib
    compose:
      distribution: rhel-9
      image_description: "{{ release_id }}"
      customizations:
        filesystem: "{{ filesystems.base }} + {{ filesystems.lamp }}"
        packages: "{{ packages.base }} + {{ packages.lamp }}"
    tags:
      - lamp
